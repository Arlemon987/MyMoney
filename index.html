<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Money</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: 'Segoe UI', sans-serif;
  background: linear-gradient(135deg,#4e73df,#1cc88a);
  color: #333;
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 20px;
}

header {
  text-align: center;
  color: white;
  margin-bottom: 20px;
}

header h1 {
  margin: 0;
  font-size: 32px;
}

.section {
  background: white;
  padding: 20px;
  border-radius: 16px;
  margin-bottom: 20px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.08);
}

.grid {
  display: grid;
  gap: 15px;
}

.summary-grid {
  grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
}

.card {
  padding: 15px;
  border-radius: 12px;
  text-align: center;
  color: white;
}

.daily { background: #36b9cc; }
.weekly { background: #f6c23e; }
.monthly { background: #e74a3b; }
.balance { background: #1cc88a; }

.card h3 { margin: 0; font-size: 14px; }
.card p { font-size: 20px; margin: 5px 0 0; }

.forms {
  grid-template-columns: repeat(auto-fit, minmax(280px,1fr));
}

form input {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
}

button {
  width: 100%;
  padding: 10px;
  border: none;
  color: white;
  font-weight: bold;
  cursor: pointer;
  border-radius: 8px;
}

.income-btn { background: #1cc88a; }
.expense-btn { background: #e74a3b; }

.transaction-item {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px solid #eee;
  font-size: 14px;
}

.profile-grid {
  grid-template-columns: repeat(auto-fit, minmax(250px,1fr));
}

canvas {
  max-width: 100%;
}

@media(max-width:600px){
  header h1 { font-size: 24px; }
}
</style>
</head>
<body>

<div class="container">

<header>
  <h1>My Money</h1>
</header>

<!-- PROFILE SECTION -->
<div class="section">
  <h2>Profile</h2>
  <div class="grid profile-grid">
    <input type="text" id="name" placeholder="Your Name">
    <input type="text" id="currency" placeholder="Currency (e.g. ৳)">
    <button onclick="saveProfile()">Save Profile</button>
  </div>
</div>

<!-- SUMMARY SECTION -->
<div class="section">
  <div class="grid summary-grid">
    <div class="card daily">
      <h3>Today</h3>
      <p id="daily">0</p>
    </div>
    <div class="card weekly">
      <h3>This Week</h3>
      <p id="weekly">0</p>
    </div>
    <div class="card monthly">
      <h3>This Month</h3>
      <p id="monthly">0</p>
    </div>
    <div class="card balance">
      <h3>Total Balance</h3>
      <p id="balance">0</p>
    </div>
  </div>
</div>

<!-- INPUT SECTION -->
<div class="section">
  <div class="grid forms">

    <form id="incomeForm">
      <h3>Add Income</h3>
      <input type="text" id="incomeDesc" placeholder="Description" required>
      <input type="number" id="incomeAmount" placeholder="Amount" required>
      <button type="submit" class="income-btn">Add Income</button>
    </form>

    <form id="expenseForm">
      <h3>Add Expense</h3>
      <input type="text" id="expenseDesc" placeholder="Description" required>
      <input type="number" id="expenseAmount" placeholder="Amount" required>
      <button type="submit" class="expense-btn">Add Expense</button>
    </form>

  </div>
</div>

<!-- TRANSACTIONS -->
<div class="section">
  <h2>Transactions</h2>
  <div id="transactions"></div>
</div>

<!-- CHART -->
<div class="section">
  <canvas id="chart"></canvas>
</div>

</div>

<script>
let transactions = JSON.parse(localStorage.getItem("transactions")) || [];
let profile = JSON.parse(localStorage.getItem("profile")) || {name:"",currency:"৳"};

document.getElementById("name").value = profile.name;
document.getElementById("currency").value = profile.currency;

function saveProfile(){
  profile.name = document.getElementById("name").value;
  profile.currency = document.getElementById("currency").value;
  localStorage.setItem("profile",JSON.stringify(profile));
  alert("Profile Saved");
  updateDashboard();
}

function saveData(){
  localStorage.setItem("transactions",JSON.stringify(transactions));
}

function addTransaction(type,desc,amount){
  transactions.push({
    type,
    desc,
    amount:parseFloat(amount),
    date:new Date().toISOString()
  });
  saveData();
  render();
}

document.getElementById("incomeForm").addEventListener("submit",function(e){
  e.preventDefault();
  addTransaction("income",
    incomeDesc.value,
    incomeAmount.value
  );
  this.reset();
});

document.getElementById("expenseForm").addEventListener("submit",function(e){
  e.preventDefault();
  addTransaction("expense",
    expenseDesc.value,
    expenseAmount.value
  );
  this.reset();
});

function render(){
  let daily=0,weekly=0,monthly=0,balance=0,incomeTotal=0,expenseTotal=0;
  let today=new Date();

  document.getElementById("transactions").innerHTML="";

  transactions.slice().reverse().forEach(tx=>{
    let txDate=new Date(tx.date);
    let amount=tx.type==="income"?tx.amount:-tx.amount;
    balance+=amount;

    if(txDate.toDateString()===today.toDateString()) daily+=amount;
    if(txDate>=new Date(today.setDate(today.getDate()-7))) weekly+=amount;
    if(txDate.getMonth()===today.getMonth()) monthly+=amount;

    if(tx.type==="income") incomeTotal+=tx.amount;
    else expenseTotal+=tx.amount;

    document.getElementById("transactions").innerHTML+=
      `<div class="transaction-item">
        <span>${tx.desc}</span>
        <span>${profile.currency}${tx.amount}</span>
      </div>`;
  });

  dailyEl("daily",daily);
  dailyEl("weekly",weekly);
  dailyEl("monthly",monthly);
  dailyEl("balance",balance);

  renderChart(incomeTotal,expenseTotal);
}

function dailyEl(id,value){
  document.getElementById(id).innerText=profile.currency+value;
}

function renderChart(income,expense){
  if(window.myChart) window.myChart.destroy();
  let ctx=document.getElementById("chart");
  window.myChart=new Chart(ctx,{
    type:"bar",
    data:{
      labels:["Income","Expense"],
      datasets:[{
        data:[income,expense],
        backgroundColor:["#1cc88a","#e74a3b"]
      }]
    }
  });
}

render();
</script>

</body>
</html>
